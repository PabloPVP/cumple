<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Miriam Birthday - Final</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@700;900&display=swap" rel="stylesheet">
    <style>
        /* --- PALETA DE COLORES --- */
        :root {
            --party-green: #00C69D;
            --party-pink: #FD52B0;
            --party-blue: #09BCFF;
            --party-orange: #FE7A39;
            --party-yellow: #F3E65F;
            --bg-dark: #0f0f12;
            --card-bg: #2d343a;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Poppins', sans-serif; }

        body {
            background-color: var(--bg-dark);
            background: radial-gradient(circle at center, #1e272e 0%, #000000 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            padding: 10px; /* Un poco de espacio en móviles */
        }

        canvas {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 1;
        }

        /* TARJETA PRINCIPAL RESPONSIVE */
        .card {
            background-color: var(--card-bg);
            width: 100%; max-width: 950px;
            min-height: 480px; /* Altura mínima flexible */
            border-radius: 40px;
            display: flex;
            flex-direction: row; /* Horizontal en PC */
            overflow: hidden;
            box-shadow: 0 30px 60px rgba(0,0,0,0.7);
            border: 2px solid var(--party-blue);
            z-index: 10;
        }

        /* PANEL DE TEXTO */
        .left-panel {
            flex: 1.2;
            padding: 30px;
            display: flex; flex-direction: column;
            justify-content: center; align-items: center; text-align: center;
        }

        h1 {
            /* Tamaño dinámico de fuente */
            font-size: clamp(1.8rem, 5vw, 3.2rem);
            color: white;
            text-shadow: 3px 3px 0 var(--party-pink);
            margin-bottom: 10px; line-height: 1.1;
        }

        #name-display {
            color: var(--party-yellow);
            font-size: clamp(1.2rem, 3vw, 1.8rem);
            font-weight: 700;
            margin-bottom: 30px; text-transform: uppercase;
        }

        .countdown {
            display: flex; gap: 10px; justify-content: center;
            flex-wrap: wrap; /* Permite que los cuadros se acomoden */
        }

        .time-box {
            background: rgba(0,0,0,0.3); border: 2px solid white;
            border-radius: 20px; padding: 15px 10px;
            min-width: 80px; flex: 1; /* Ancho flexible */
        }

        .box-d { border-bottom: 6px solid var(--party-green); }
        .box-h { border-bottom: 6px solid var(--party-pink); }
        .box-m { border-bottom: 6px solid var(--party-blue); }
        .box-s { border-bottom: 6px solid var(--party-orange); }

        .number { font-size: clamp(1.5rem, 4vw, 2.5rem); font-weight: 900; color: white; display: block; }
        .label { font-size: 0.65rem; color: #aaa; font-weight: bold; }

        /* PANEL DE IMAGEN */
        .right-panel {
            flex: 0.8;
            background: #222;
            min-height: 300px; /* Altura mínima para que se vea bien en móvil */
        }

        #card-image {
            width: 100%; height: 100%;
            object-fit: cover; display: block;
        }

        /* --- MEDIA QUERY PARA MÓVILES --- */
        @media (max-width: 768px) {
            .card {
                flex-direction: column-reverse; /* Imagen arriba, texto abajo */
                height: auto;
                max-width: 450px;
            }
            .right-panel { flex: none; height: 350px; } /* Altura fija para la imagen en móvil */
            .left-panel { padding: 30px 15px; }
            .countdown { 
                display: grid; grid-template-columns: 1fr 1fr; /* 2x2 en móviles */
                width: 100%; gap: 10px;
            }
            .time-box { min-width: unset; padding: 10px; }
            .label { font-size: 0.6rem; } /* Etiquetas más pequeñas */
        }
    </style>
</head>
<body>

    <canvas id="celebration-canvas"></canvas>

    <div class="card">
        <div class="left-panel">
            <h1>¡FELIZ CUMPLEAÑOS!</h1>
            <div id="name-display">FESTEJADO: Miriam</div>
            <div class="countdown">
                <div class="time-box box-d"><span class="number" id="d">00</span><span class="label">DÍAS</span></div>
                <div class="time-box box-h"><span class="number" id="h">00</span><span class="label">HORAS</span></div>
                <div class="time-box box-m"><span class="number" id="m">00</span><span class="label">MINS</span></div>
                <div class="time-box box-s"><span class="number" id="s">00</span><span class="label">SEGS</span></div>
            </div>
        </div>
        <div class="right-panel">
            <img id="card-image" src="https://pbs.twimg.com/media/GNd0IRjWYAAKo6R.jpg" alt="Retrato Miriam">
        </div>
    </div>

    <script>
        const canvas = document.getElementById('celebration-canvas');
        const ctx = canvas.getContext('2d');
        let countdownInterval, confetti = [], fireworks = [], isCelebrating = false;
        const colors = ['#00C69D', '#E2C2F3', '#09BCFF', '#F3E65F', '#FE7A39', '#FD52B0'];

        function initCountdown() {
            // Fecha fija: 9 de Enero
            const birthMonth = 0; 
            const birthDay = 9;

            countdownInterval = setInterval(() => {
                const now = new Date();
                let target = new Date(now.getFullYear(), birthMonth, birthDay, 12, 0, 0);
                
                if (now > target) {
                    target.setFullYear(now.getFullYear() + 1);
                }
                
                const diff = target - now;

                if (diff <= 0 && diff > -43200000) {
                    if (!isCelebrating) startCelebration();
                    updateDigits(0, 0, 0, 0);
                    return;
                }

                isCelebrating = false;
                const d = Math.floor(diff/86400000);
                const h = Math.floor((diff%86400000)/3600000);
                const m = Math.floor((diff%3600000)/60000);
                const s = Math.floor((diff%60000)/1000);
                updateDigits(d, h, m, s);
            }, 1000);
        }

        function updateDigits(days, hours, mins, secs) {
            document.getElementById('d').innerText = days.toString().padStart(2,'0');
            document.getElementById('h').innerText = hours.toString().padStart(2,'0');
            document.getElementById('m').innerText = mins.toString().padStart(2,'0');
            document.getElementById('s').innerText = secs.toString().padStart(2,'0');
        }

        function startCelebration() {
            if(isCelebrating) return;
            isCelebrating = true;
            resizeCanvas();
            confetti = Array.from({length: 120}, () => ({
                x: Math.random() * canvas.width,
                y: Math.random() * canvas.height - canvas.height,
                size: Math.random() * 8 + 4,
                color: colors[Math.floor(Math.random() * colors.length)],
                speed: Math.random() * 3 + 2,
                drift: Math.random() * 2 - 1,
                rotation: Math.random() * 360,
                rSpeed: Math.random() * 10 - 5,
                shape: Math.random() > 0.5 ? 'circle' : 'square'
            }));
            fireworks = [];
            requestAnimationFrame(animate);
        }

        function animate() {
            if (!isCelebrating && fireworks.length === 0) {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                return;
            }
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            confetti.forEach(p => {
                ctx.save();
                ctx.translate(p.x, p.y);
                ctx.rotate(p.rotation * Math.PI / 180);
                ctx.fillStyle = p.color;
                ctx.beginPath();
                if (p.shape === 'circle') ctx.arc(0, 0, p.size/2, 0, Math.PI*2);
                else ctx.rect(-p.size/2, -p.size/2, p.size, p.size);
                ctx.fill();
                ctx.restore();
                p.y += p.speed; p.x += p.drift; p.rotation += p.rSpeed;
                if (p.y > canvas.height) p.y = -20;
            });

            if (isCelebrating && Math.random() < 0.04) {
                fireworks.push({
                    x: Math.random() * canvas.width, y: canvas.height,
                    targetY: Math.random() * (canvas.height * 0.5),
                    color: colors[Math.floor(Math.random() * colors.length)],
                    particles: [], exploded: false
                });
            }

            fireworks.forEach((f) => {
                if (!f.exploded) {
                    f.y -= 7; ctx.fillStyle = f.color; ctx.fillRect(f.x, f.y, 3, 12);
                    if (f.y <= f.targetY) {
                        f.exploded = true;
                        for (let j = 0; j < 30; j++) {
                            const ang = Math.random() * Math.PI * 2;
                            const spd = Math.random() * 5 + 2;
                            f.particles.push({ x: f.x, y: f.y, vx: Math.cos(ang) * spd, vy: Math.sin(ang) * spd, alpha: 1 });
                        }
                    }
                } else {
                    f.particles.forEach(p => {
                        p.x += p.vx; p.y += p.vy; p.vy += 0.1; p.alpha -= 0.018;
                        ctx.globalAlpha = Math.max(0, p.alpha);
                        ctx.fillStyle = f.color;
                        ctx.beginPath(); ctx.arc(p.x, p.y, 2, 0, Math.PI * 2); ctx.fill();
                    });
                    f.particles = f.particles.filter(p => p.alpha > 0);
                }
            });
            fireworks = fireworks.filter(f => !f.exploded || f.particles.length > 0);
            ctx.globalAlpha = 1;
            requestAnimationFrame(animate);
        }

        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }

        window.onload = () => {
            initCountdown();
            window.addEventListener('resize', resizeCanvas);
        };
    </script>
</body>
</html>
