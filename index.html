<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cuenta Regresiva - Miriam</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --party-green: #00C69D;
            --party-pink: #FD52B0;
            --party-blue: #09BCFF;
            --party-orange: #FE7A39;
            --party-yellow: #F3E65F;
            --bg-dark: #0f0f12;
            --card-bg: #2d343a;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Poppins', sans-serif; }

        body {
            background-color: var(--bg-dark);
            background: radial-gradient(circle at center, #1e272e 0%, #000000 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        canvas {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 1;
        }

        .card {
            background-color: var(--card-bg);
            width: 95%; max-width: 950px;
            height: 480px; border-radius: 40px;
            display: flex; overflow: hidden;
            box-shadow: 0 30px 60px rgba(0,0,0,0.7);
            border: 2px solid var(--party-blue);
            z-index: 10;
        }

        .left-panel {
            flex: 1.2; padding: 40px;
            display: flex; flex-direction: column;
            justify-content: center; align-items: center; text-align: center;
        }

        h1 {
            font-size: 3.2rem; color: white;
            text-shadow: 3px 3px 0 var(--party-pink);
            margin-bottom: 5px; line-height: 1.1;
        }

        #name-display {
            color: var(--party-yellow);
            font-size: 1.8rem; font-weight: 700;
            margin-bottom: 35px; text-transform: uppercase;
        }

        .countdown { display: flex; gap: 15px; }

        .time-box {
            background: rgba(0,0,0,0.3); border: 2px solid white;
            border-radius: 20px; padding: 15px; min-width: 90px;
        }

        .box-d { border-bottom: 6px solid var(--party-green); }
        .box-h { border-bottom: 6px solid var(--party-pink); }
        .box-m { border-bottom: 6px solid var(--party-blue); }
        .box-s { border-bottom: 6px solid var(--party-orange); }

        .number { font-size: 2.5rem; font-weight: 900; color: white; display: block; }
        .label { font-size: 0.7rem; color: #aaa; font-weight: bold; }

        .right-panel { flex: 0.8; background: #222; }
        #card-image { width: 100%; height: 100%; object-fit: cover; display: block; }

        @media (max-width: 768px) {
            .card { flex-direction: column; height: auto; }
            .right-panel { height: 250px; }
            h1 { font-size: 2rem; }
        }
    </style>
</head>
<body>

    <canvas id="celebration-canvas"></canvas>

    <div class="card">
        <div class="left-panel">
            <h1>¡FELIZ CUMPLEAÑOS!</h1>
            <div id="name-display">FESTEJADO: Miriam</div>
            <div class="countdown">
                <div class="time-box box-d"><span class="number" id="d">00</span><span class="label">DÍAS</span></div>
                <div class="time-box box-h"><span class="number" id="h">00</span><span class="label">HORAS</span></div>
                <div class="time-box box-m"><span class="number" id="m">00</span><span class="label">MINUTOS</span></div>
                <div class="time-box box-s"><span class="number" id="s">00</span><span class="label">SEGUNDOS</span></div>
            </div>
        </div>
        <div class="right-panel">
            <img id="card-image" src="https://i.imgur.com/8Q5X12K.png" alt="Retrato de Miriam">
        </div>
    </div>

    <script>
        const canvas = document.getElementById('celebration-canvas');
        const ctx = canvas.getContext('2d');
        let countdownInterval, confetti = [], fireworks = [], isCelebrating = false;
        const colors = ['#00C69D', '#E2C2F3', '#09BCFF', '#F3E65F', '#FE7A39', '#FD52B0'];

        function initCountdown() {
            // Fecha fija: 9 de Enero
            const birthMonth = 0; // Enero es 0 en JS
            const birthDay = 9;

            countdownInterval = setInterval(() => {
                const now = new Date();
                // Calcula el próximo 9 de enero a las 12:00 PM
                let target = new Date(now.getFullYear(), birthMonth, birthDay, 12, 0, 0);
                
                // Si hoy ya pasó el mediodía del 9 de enero, apunta al próximo año
                if (now > target) {
                    target.setFullYear(now.getFullYear() + 1);
                }
                
                const diff = target - now;

                // Si es el momento del cumpleaños (entre las 12 PM y las 11:59 PM de ese día)
                if (diff <= 0 && diff > -43200000) {
                    if (!isCelebrating) startCelebration();
                    document.getElementById('d').innerText = "00";
                    document.getElementById('h').innerText = "00";
                    document.getElementById('m').innerText = "00";
                    document.getElementById('s').innerText = "00";
                    return;
                }

                isCelebrating = false;
                document.getElementById('d').innerText = Math.floor(diff/86400000).toString().padStart(2,'0');
                document.getElementById('h').innerText = Math.floor((diff%86400000)/3600000).toString().padStart(2,'0');
                document.getElementById('m').innerText = Math.floor((diff%3600000)/60000).toString().padStart(2,'0');
                document.getElementById('s').innerText = Math.floor((diff%60000)/1000).toString().padStart(2,'0');
            }, 1000);
        }

        function startCelebration() {
            if(isCelebrating) return;
            isCelebrating = true;
            resizeCanvas();
            confetti = Array.from({length: 150}, () => ({
                x: Math.random() * canvas.width,
                y: Math.random() * canvas.height - canvas.height,
                size: Math.random() * 8 + 4,
                color: colors[Math.floor(Math.random() * colors.length)],
                speed: Math.random() * 3 + 2,
                drift: Math.random() * 2 - 1,
                rotation: Math.random() * 360,
                rSpeed: Math.random() * 10 - 5,
                shape: Math.random() > 0.5 ? 'circle' : 'square'
            }));
            fireworks = [];
            requestAnimationFrame(animate);
        }

        function animate() {
            if (!isCelebrating && fireworks.length === 0) {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                return;
            }
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            confetti.forEach(p => {
                ctx.save();
                ctx.translate(p.x, p.y);
                ctx.rotate(p.rotation * Math.PI / 180);
                ctx.fillStyle = p.color;
                ctx.beginPath();
                if (p.shape === 'circle') ctx.arc(0, 0, p.size/2, 0, Math.PI*2);
                else ctx.rect(-p.size/2, -p.size/2, p.size, p.size);
                ctx.fill();
                ctx.restore();
                p.y += p.speed; p.x += p.drift; p.rotation += p.rSpeed;
                if (p.y > canvas.height) p.y = -20;
            });

            if (isCelebrating && Math.random() < 0.04) {
                fireworks.push({
                    x: Math.random() * canvas.width, y: canvas.height,
                    targetY: Math.random() * (canvas.height * 0.5),
                    color: colors[Math.floor(Math.random() * colors.length)],
                    particles: [], exploded: false
                });
            }

            fireworks.forEach((f) => {
                if (!f.exploded) {
                    f.y -= 7; ctx.fillStyle = f.color; ctx.fillRect(f.x, f.y, 3, 15);
                    if (f.y <= f.targetY) {
                        f.exploded = true;
                        for (let j = 0; j < 35; j++) {
                            const ang = Math.random() * Math.PI * 2;
                            const spd = Math.random() * 5 + 2;
                            f.particles.push({ x: f.x, y: f.y, vx: Math.cos(ang) * spd, vy: Math.sin(ang) * spd, alpha: 1 });
                        }
                    }
                } else {
                    f.particles.forEach(p => {
                        p.x += p.vx; p.y += p.vy; p.vy += 0.1; p.alpha -= 0.015;
                        ctx.globalAlpha = Math.max(0, p.alpha);
                        ctx.fillStyle = f.color;
                        ctx.beginPath(); ctx.arc(p.x, p.y, 2.5, 0, Math.PI * 2); ctx.fill();
                    });
                    f.particles = f.particles.filter(p => p.alpha > 0);
                }
            });
            fireworks = fireworks.filter(f => !f.exploded || f.particles.length > 0);
            ctx.globalAlpha = 1;
            requestAnimationFrame(animate);
        }

        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }

        window.onload = () => {
            initCountdown();
            window.addEventListener('resize', resizeCanvas);
        };
    </script>
</body>
</html>
